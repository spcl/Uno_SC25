#!/bin/bash

#8x, 32x, 128x, 512x
mkdir -p artifact_results/fig11
mkdir -p exp_data
mkdir -p exp_data/incast_experiment_fat_tree_100Gbps
mkdir -p fig11_results

# Gemini
echo "Simulating Gemini 40% load disting inter- to intra-RTT ratios...\n"
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noQaInter -noQaIntra -forceQueueSize 1000000 -kmin 25 -kmax 75 -ecnAlpha 0.5 -usePacing 1 -lcpK 6 -interAlgo gemini -intraAlgo gemini -geminiH 0.00024 -geminiBeta 0.1 -geminiT 5 -interdcDelay 46500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-ForceQ=1000000-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=gemini-intraAlgo=gemini-geminiH=0.00024-geminiBeta=0.1-geminiT=5-delay=46500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noQaInter -noQaIntra -forceQueueSize 1000000 -kmin 25 -kmax 75 -ecnAlpha 0.5 -usePacing 1 -lcpK 6 -interAlgo gemini -intraAlgo gemini -geminiH 0.00024 -geminiBeta 0.1 -geminiT 5 -interdcDelay 214500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-ForceQ=1000000-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=gemini-intraAlgo=gemini-geminiH=0.00024-geminiBeta=0.1-geminiT=5-delay=214500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noQaInter -noQaIntra -forceQueueSize 1000000 -kmin 25 -kmax 75 -ecnAlpha 0.5 -usePacing 1 -lcpK 6 -interAlgo gemini -intraAlgo gemini -geminiH 0.00024 -geminiBeta 0.1 -geminiT 5 -interdcDelay 886500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-ForceQ=1000000-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=gemini-intraAlgo=gemini-geminiH=0.00024-geminiBeta=0.1-geminiT=5-delay=886500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noQaInter -noQaIntra -forceQueueSize 1000000 -kmin 25 -kmax 75 -ecnAlpha 0.5 -usePacing 1 -lcpK 6 -interAlgo gemini -intraAlgo gemini -geminiH 0.00024 -geminiBeta 0.1 -geminiT 5 -interdcDelay 3574500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-ForceQ=1000000-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=gemini-intraAlgo=gemini-geminiH=0.00024-geminiBeta=0.1-geminiT=5-delay=3574500 > out_res_11.tmp
# Gemini results
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-ForceQ=1000000-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=gemini-intraAlgo=gemini-geminiH=0.00024-geminiBeta=0.1-geminiT=5-delay=46500/output/ --fct_only > ./fig11_results/gemini_8x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-ForceQ=1000000-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=gemini-intraAlgo=gemini-geminiH=0.00024-geminiBeta=0.1-geminiT=5-delay=214500/output/ --fct_only > ./fig11_results/gemini_32x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-ForceQ=1000000-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=gemini-intraAlgo=gemini-geminiH=0.00024-geminiBeta=0.1-geminiT=5-delay=886500/output/ --fct_only > ./fig11_results/gemini_128x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-ForceQ=1000000-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=gemini-intraAlgo=gemini-geminiH=0.00024-geminiBeta=0.1-geminiT=5-delay=3574500/output/ --fct_only > ./fig11_results/gemini_512x.txt

# BBR+MPRDMA
echo "Simulating BBR+MPRDMA 40% load disting inter- to intra-RTT ratios...\n"
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noQaInter -noQaIntra -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -ecnAlpha 0.5 -usePacing 1 -lcpK 6 -interAlgo bbr -ccAlgoIntra mprdma -interdcDelay 46500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=bbr-ccAlgoIntra=mprdma-delay=46500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noQaInter -noQaIntra -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -ecnAlpha 0.5 -usePacing 1 -lcpK 6 -interAlgo bbr -ccAlgoIntra mprdma -interdcDelay 214500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=bbr-ccAlgoIntra=mprdma-delay=214500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noQaInter -noQaIntra -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -ecnAlpha 0.5 -usePacing 1 -lcpK 6 -interAlgo bbr -ccAlgoIntra mprdma -interdcDelay 886500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=bbr-ccAlgoIntra=mprdma-delay=886500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noQaInter -noQaIntra -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -ecnAlpha 0.5 -usePacing 1 -lcpK 6 -interAlgo bbr -ccAlgoIntra mprdma -interdcDelay 3574500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=bbr-ccAlgoIntra=mprdma-delay=3574500 > out_res_11.tmp
# BBR results
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=bbr-ccAlgoIntra=mprdma-delay=46500/output/ --fct_only > ./fig11_results/bbr_mprdma_8x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=bbr-ccAlgoIntra=mprdma-delay=214500/output/ --fct_only > ./fig11_results/bbr_mprdma_32x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=bbr-ccAlgoIntra=mprdma-delay=886500/output/ --fct_only > ./fig11_results/bbr_mprdma_128x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noQaInter-noQaIntra-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-alpha=0.5-pace-K=6-interAlgo=bbr-ccAlgoIntra=mprdma-delay=3574500/output/ --fct_only > ./fig11_results/bbr_mprdma_512x.txt

# Uno + ECMP
echo "Simulating UnoCC+ECMP 40% load disting inter- to intra-RTT ratios...\n"
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -lcpAlgo aimd_phantom -use_phantom 1 -phantom_size 22400515 -phantom_slowdown 10 -phantom_kmin 2 -phantom_kmax 60 -ecnAlpha 0.5 -usePacing 1 -interEcn -lcpK 6 -interdcDelay 46500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=46500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -lcpAlgo aimd_phantom -use_phantom 1 -phantom_size 22400515 -phantom_slowdown 10 -phantom_kmin 2 -phantom_kmax 60 -ecnAlpha 0.5 -usePacing 1 -interEcn -lcpK 6 -interdcDelay 214500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=214500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -lcpAlgo aimd_phantom -use_phantom 1 -phantom_size 22400515 -phantom_slowdown 10 -phantom_kmin 2 -phantom_kmax 60 -ecnAlpha 0.5 -usePacing 1 -interEcn -lcpK 6 -interdcDelay 886500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=886500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat ecmp_classic -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -lcpAlgo aimd_phantom -use_phantom 1 -phantom_size 22400515 -phantom_slowdown 10 -phantom_kmin 2 -phantom_kmax 60 -ecnAlpha 0.5 -usePacing 1 -interEcn -lcpK 6 -interdcDelay 3574500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=3574500 > out_res_11.tmp
# Uno + ECMP results
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=46500/output/ --fct_only > ./fig11_results/uno_ecmp_8x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=214500/output/ --fct_only > ./fig11_results/uno_ecmp_32x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=886500/output/ --fct_only > ./fig11_results/uno_ecmp_128x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=ecmp_classic-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=3574500/output/ --fct_only > ./fig11_results/uno_ecmp_512x.txt

# Uno
echo "Simulating UnoCC+UnoLB 40% load disting inter- to intra-RTT ratios...\n"
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat simple_subflow -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -lcpAlgo aimd_phantom -use_phantom 1 -phantom_size 22400515 -phantom_slowdown 10 -phantom_kmin 2 -phantom_kmax 60 -ecnAlpha 0.5 -usePacing 1 -interEcn -lcpK 6 -interdcDelay 46500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=simple_subflow-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=46500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat simple_subflow -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -lcpAlgo aimd_phantom -use_phantom 1 -phantom_size 22400515 -phantom_slowdown 10 -phantom_kmin 2 -phantom_kmax 60 -ecnAlpha 0.5 -usePacing 1 -interEcn -lcpK 6 -interdcDelay 214500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=simple_subflow-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=214500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat simple_subflow -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -lcpAlgo aimd_phantom -use_phantom 1 -phantom_size 22400515 -phantom_slowdown 10 -phantom_kmin 2 -phantom_kmax 60 -ecnAlpha 0.5 -usePacing 1 -interEcn -lcpK 6 -interdcDelay 886500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=simple_subflow-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=886500 > out_res_11.tmp
./sim/datacenter/htsim_lcp_entry_modern -o uec_entry -seed 15 -queue_type composite -hop_latency 1000 -switch_latency 0 -nodes 128 -collect_data 1 -topology interdc -os_border 16 -strat simple_subflow -linkspeed 100000 -topo lcp/configs/topos/fat_tree_100Gbps.topo -tm lcp/configs/tms/workloads/websearchIntra_AlibabaInter_5000f_40l.cm -noFi -noRto -forceQueueSize 1000000 -interKmin 25 -interKmax 75 -kmin 25 -kmax 75 -lcpAlgo aimd_phantom -use_phantom 1 -phantom_size 22400515 -phantom_slowdown 10 -phantom_kmin 2 -phantom_kmax 60 -ecnAlpha 0.5 -usePacing 1 -interEcn -lcpK 6 -interdcDelay 3574500 -logging-folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=simple_subflow-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=3574500 > out_res_11.tmp
# Uno results
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=simple_subflow-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=46500/output/ --fct_only > ./fig11_results/uno_8x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=simple_subflow-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=214500/output/ --fct_only > ./fig11_results/uno_32x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=simple_subflow-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=886500/output/ --fct_only > ./fig11_results/uno_128x.txt
python3 lcp/scripts/plot_script_micro.py --input_folder exp_data/incast_experiment_fat_tree_100Gbps/tm=websearchIntra_AlibabaInter_5000f_40l-lb=simple_subflow-os_b=16-noFi-noRto-ForceQ=1000000-wanKmin=25-wanKmin=75-kmin=25-kmax=75-lcpAlgo=aimd_phantom-usePh-PhSize=22400515-PhSlow=10-PhKmin=2-PhKmax=60-alpha=0.5-pace-interEcn-K=6-delay=3574500/output/ --fct_only > ./fig11_results/uno_512x.txt

python3 artifact_scripts/fig11.py 